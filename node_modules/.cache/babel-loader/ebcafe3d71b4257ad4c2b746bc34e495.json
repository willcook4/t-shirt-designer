{"ast":null,"code":"import * as React from \"react\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar _a, _b;\nconst useIsomorphicLayoutEffect = typeof window !== \"undefined\" && (((_a = window.document) == null ? void 0 : _a.createElement) || ((_b = window.navigator) == null ? void 0 : _b.product) === \"ReactNative\") ? React.useLayoutEffect : React.useEffect;\nfunction traverseFiber(fiber, ascending, selector) {\n  if (!fiber) return;\n  if (selector(fiber) === true) return fiber;\n  let child = ascending ? fiber.return : fiber.child;\n  while (child) {\n    const match = traverseFiber(child, ascending, selector);\n    if (match) return match;\n    child = ascending ? null : child.sibling;\n  }\n}\nfunction wrapContext(context) {\n  try {\n    return Object.defineProperties(context, {\n      _currentRenderer: {\n        get() {\n          return null;\n        },\n        set() {}\n      },\n      _currentRenderer2: {\n        get() {\n          return null;\n        },\n        set() {}\n      }\n    });\n  } catch (_) {\n    return context;\n  }\n}\nconst error = console.error;\nconsole.error = function () {\n  const message = [...arguments].join(\"\");\n  if ((message == null ? void 0 : message.startsWith(\"Warning:\")) && message.includes(\"useContext\")) {\n    console.error = error;\n    return;\n  }\n  return error.apply(this, arguments);\n};\nconst FiberContext = wrapContext(React.createContext(null));\nclass FiberProvider extends React.Component {\n  render() {\n    return /* @__PURE__ */React.createElement(FiberContext.Provider, {\n      value: this._reactInternals\n    }, this.props.children);\n  }\n}\nfunction useFiber() {\n  const root = React.useContext(FiberContext);\n  if (root === null) throw new Error(\"its-fine: useFiber must be called within a <FiberProvider />!\");\n  const id = React.useId();\n  const fiber = React.useMemo(() => {\n    for (const maybeFiber of [root, root == null ? void 0 : root.alternate]) {\n      if (!maybeFiber) continue;\n      const fiber2 = traverseFiber(maybeFiber, false, node => {\n        let state = node.memoizedState;\n        while (state) {\n          if (state.memoizedState === id) return true;\n          state = state.next;\n        }\n      });\n      if (fiber2) return fiber2;\n    }\n  }, [root, id]);\n  return fiber;\n}\nfunction useContainer() {\n  const fiber = useFiber();\n  const root = React.useMemo(() => traverseFiber(fiber, true, node => {\n    var _a2;\n    return ((_a2 = node.stateNode) == null ? void 0 : _a2.containerInfo) != null;\n  }), [fiber]);\n  return root == null ? void 0 : root.stateNode.containerInfo;\n}\nfunction useNearestChild(type) {\n  const fiber = useFiber();\n  const childRef = React.useRef();\n  useIsomorphicLayoutEffect(() => {\n    var _a2;\n    childRef.current = (_a2 = traverseFiber(fiber, false, node => typeof node.type === \"string\" && (type === void 0 || node.type === type))) == null ? void 0 : _a2.stateNode;\n  }, [fiber]);\n  return childRef;\n}\nfunction useNearestParent(type) {\n  const fiber = useFiber();\n  const parentRef = React.useRef();\n  useIsomorphicLayoutEffect(() => {\n    var _a2;\n    parentRef.current = (_a2 = traverseFiber(fiber, true, node => typeof node.type === \"string\" && (type === void 0 || node.type === type))) == null ? void 0 : _a2.stateNode;\n  }, [fiber]);\n  return parentRef;\n}\nfunction useContextMap() {\n  const fiber = useFiber();\n  const [contextMap] = React.useState(() => /* @__PURE__ */new Map());\n  contextMap.clear();\n  let node = fiber;\n  while (node) {\n    if (node.type && typeof node.type === \"object\") {\n      const enableRenderableContext = node.type._context === void 0 && node.type.Provider === node.type;\n      const context = enableRenderableContext ? node.type : node.type._context;\n      if (context && context !== FiberContext && !contextMap.has(context)) {\n        contextMap.set(context, React.useContext(wrapContext(context)));\n      }\n    }\n    node = node.return;\n  }\n  return contextMap;\n}\nfunction useContextBridge() {\n  const contextMap = useContextMap();\n  return React.useMemo(() => Array.from(contextMap.keys()).reduce((Prev, context) => props => /* @__PURE__ */React.createElement(Prev, null, /* @__PURE__ */React.createElement(context.Provider, __spreadProps(__spreadValues({}, props), {\n    value: contextMap.get(context)\n  }))), props => /* @__PURE__ */React.createElement(FiberProvider, __spreadValues({}, props))), [contextMap]);\n}\nexport { FiberProvider, traverseFiber, useContainer, useContextBridge, useContextMap, useFiber, useNearestChild, useNearestParent };","map":{"version":3,"names":["_a","_b","useIsomorphicLayoutEffect","window","document","createElement","navigator","product","React","useLayoutEffect","useEffect","traverseFiber","fiber","ascending","selector","child","return","match","sibling","wrapContext","context","Object","defineProperties","_currentRenderer","get","set","_currentRenderer2","_","error","console","message","arguments","join","startsWith","includes","apply","FiberContext","createContext","FiberProvider","Component","render","Provider","value","_reactInternals","props","children","useFiber","root","useContext","Error","id","useId","useMemo","maybeFiber","alternate","fiber2","node","state","memoizedState","next","useContainer","_a2","stateNode","containerInfo","useNearestChild","type","childRef","useRef","current","useNearestParent","parentRef","useContextMap","contextMap","useState","Map","clear","enableRenderableContext","_context","has","useContextBridge","Array","from","keys","reduce","Prev","__spreadProps","__spreadValues"],"sources":["../src/index.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}